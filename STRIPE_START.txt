#!/bin/bash
# STRIPE INTEGRATION - READY TO RUN
# Copy-paste commands below into PowerShell

echo "================================"
echo "STRIPE INTEGRATION SETUP"
echo "================================"
echo ""
echo "Step 1: Install Node.js"
echo "  → Download from nodejs.org"
echo "  → Restart PowerShell after install"
echo "  → Verify: node --version"
echo ""
echo "Step 2: Configure Stripe Keys"
echo "  → Go to https://dashboard.stripe.com/apikeys"
echo "  → Edit backend/.env with your test keys"
echo ""
echo "Step 3: Install Dependencies"
echo "  → cd backend && npm install"
echo ""
echo "Step 4: Run Backend"
echo "  → cd backend && npm run dev"
echo ""
echo "Step 5: Run Frontend (new window)"
echo "  → cd web-foundations && python -m http.server 3000"
echo ""
echo "Step 6: Test"
echo "  → Open http://localhost:3000"
echo "  → Click Pricing → Choose Plan → Enter 4242 4242 4242 4242"
echo ""
echo "================================"
echo "DOCUMENTATION"
echo "================================"
echo ""
echo "Quick Start:"
echo "  → STRIPE_RUN.md (read this first)"
echo ""
echo "Setup Details:"
echo "  → STRIPE_SETUP.md (detailed guide)"
echo ""
echo "Architecture:"
echo "  → STRIPE_ARCHITECTURE.md (technical deep dive)"
echo ""
echo "Quick Reference:"
echo "  → STRIPE_QUICK_START.md (fast overview)"
echo ""
echo "================================"
echo "TEST CARD"
echo "================================"
echo ""
echo "Number: 4242 4242 4242 4242"
echo "Expiry: 12/25 (or any future date)"
echo "CVC:    123"
echo "ZIP:    12345"
echo ""
echo "================================"
echo "API ENDPOINTS"
echo "================================"
echo ""
echo "GET  /api/payment/plans              → Get available plans"
echo "POST /api/payment/create-checkout    → Create Stripe Payment Intent"
echo "GET  /api/payment/subscription/status → Check if user has access"
echo "POST /webhooks/stripe                → Stripe webhook (automatic)"
echo ""
echo "================================"
echo "KEY FILES"
echo "================================"
echo ""
echo "backend/routes/payment.js            → Payment endpoints"
echo "backend/routes/webhooks.js           → Stripe webhooks (CRITICAL)"
echo "backend/config/plans.js              → Subscription plans"
echo "backend/models/user.js               → Database schemas"
echo "backend/.env                         → Your Stripe keys"
echo "frontend/pricing.html                → Payment form UI"
echo ""
echo "================================"
echo "STATUS"
echo "================================"
echo ""
echo "✅ Backend code ready"
echo "✅ Frontend code ready"
echo "✅ Security implemented"
echo "⚠️  Stripe keys needed"
echo "⚠️  npm install needed"
echo ""
echo "================================"
echo "NEXT STEPS"
echo "================================"
echo ""
echo "1. Get Stripe keys (5 min)"
echo "   → https://stripe.com/register"
echo "   → https://dashboard.stripe.com/apikeys"
echo ""
echo "2. Update backend/.env (1 min)"
echo "   → Add STRIPE_SECRET_KEY"
echo "   → Add STRIPE_PUBLISHABLE_KEY"
echo ""
echo "3. Install & run (2 min)"
echo "   → cd backend && npm install"
echo "   → npm run dev"
echo ""
echo "4. Test (2 min)"
echo "   → python -m http.server 3000"
echo "   → http://localhost:3000"
echo "   → Try payment with 4242 card"
echo ""
echo "================================"
echo "HELP"
echo "================================"
echo ""
echo "Can't run npm?"
echo "  → Node.js not installed"
echo "  → Download from nodejs.org"
echo ""
echo "Port 5000 in use?"
echo "  → Stop-Process -Id (Get-NetTCPConnection -LocalPort 5000).OwningProcess -Force"
echo ""
echo "Stripe keys not working?"
echo "  → Check .env file syntax"
echo "  → Restart backend after editing"
echo ""
echo "Want full docs?"
echo "  → Read STRIPE_RUN.md (exact commands)"
echo "  → Read STRIPE_SETUP.md (detailed guide)"
echo ""
echo "================================"
echo "YOU'RE READY!"
echo "================================"
echo ""
